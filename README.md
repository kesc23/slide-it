# Wocommerce Product By Category

### Author: Kesc23
| Twitter | Fiverr |
|-|-:|
| [@kevin_esc23](https://twitter.com/kevin_esc23) | [/kesc23](https://fiverr.com/kesc23)|

#### Version 0.7.0
#### Changelog

- Changed admin style from 'style.css' to 'style.php'

Altough this seems like a strange idea, i kinda couldn't work my way to add styles
in the WPC admin page inside WordPress.

The method used was by means of using action hooks from WP.

As i can print out info from php code inside the admin page i thought *i can work my way **creating a function to print style***

```php
/**
 * This function adds a stylesheet to the WPC admin page.
 *
 * @since 0.7.0
 * @return string returns the style for admin page
 */
function wpc_admin_style()
{
    $wpc_admin_style = '
      // Style inside
    ';

    //returns a HTML style tag to print the stylesheet inline
    return '<style>' . $wpc_admin_style . '</style>';
}
?>
```

Then, all i need to do is echo out this function inside my admin page:

```php
//inside adminpage.php
    require_once WPCADMIN . 'style.php';

    echo wpc_admin_style();
```

- Added a shortcode generation form

Inside the *"Product by Category"* tab in WordPress, now you'll have
the Shorcode generation form.

With this form, you'll be able to set the Category, Products to show, Ordering by name *"Ascending" or "Descending"*.

After, if everything is alright, it will prompt the shortcode for you to put inside a page, post and etc.


- Added a function to display the generated shortcode inside the WPC tab.

After the shortcode is successfully generated by the form and the page reloads,
this function returns 2 things: a message, saying that 'this is the shortcode generated'.
Right below it, there's the shortcode itself, that the user can get and put in the site.

Here's the function's code

```php

function wpc_display_shortcode()
{
    if ( isset($_POST['cat-name']) && isset($_POST['num-p']) && isset($_POST['p-order']))
    {
        if ( $_POST['cat-name'] == '' || $_POST['cat-name'] == null )
        {
            return do_action( 'admin_messages' , 'Categoria não inserida', 'error');
        } else {
            return do_action( 'admin_messages' , 'Esse é o seu shortcode. insira-o na página desejada', 'updated') .
            '
            <div class="wpc-shortcode-field">
                <p>[WPC_PRODUCT_SHORTCODE cat-name="' . $_POST['cat-name'] . '" num-p=' . $_POST["num-p"] . '" p-order="' . $_POST["p-order"] .'"]</p>
                <p></p>
            </div>
            ';
        }
    }
}

```

Inside the WPC page, there's a call to this function:

```php
//Somewhere in the file
echo wpc_display_shortcode();
```
